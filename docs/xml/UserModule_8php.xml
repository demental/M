<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.5.6">
  <compounddef id="UserModule_8php" kind="file">
    <compoundname>UserModule.php</compoundname>
    <innerclass refid="classOffice__UserModule" prot="public">Office_UserModule</innerclass>
    <innernamespace refid="namespaceM">M</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="21"><highlight class="keyword">class<sp/></highlight><highlight class="normal">Office_UserModule<sp/></highlight><highlight class="keyword">extends</highlight><highlight class="normal"><sp/><ref refid="classModule" kindref="compound">Module</ref><sp/>{</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>function<sp/>doExecLogin()</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>ob_clean();</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>$do<sp/>=<sp/>User::getInstance(</highlight><highlight class="stringliteral">&apos;office&apos;</highlight><highlight class="normal">)-&gt;getDBDO();</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>$do-&gt;getPlugin(</highlight><highlight class="stringliteral">&apos;user&apos;</highlight><highlight class="normal">)-&gt;prepareForLogin($do,$do-&gt;userFields[</highlight><highlight class="stringliteral">&apos;register&apos;</highlight><highlight class="normal">],$do-&gt;userFields[</highlight><highlight class="stringliteral">&apos;reminder&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/>$fb<sp/>=<sp/>MyFB::create($do);</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>$form<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>HTML_QuickForm(</highlight><highlight class="stringliteral">&apos;loginform&apos;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&apos;POST&apos;</highlight><highlight class="normal">,URL::get(</highlight><highlight class="stringliteral">&apos;user/login&apos;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>$fb-&gt;useForm($form);</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>$fb-&gt;getForm();</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;assignRef(</highlight><highlight class="stringliteral">&apos;form&apos;</highlight><highlight class="normal">,$form);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($form-&gt;validate())<sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>$this-&gt;redirect(User::getInstance(</highlight><highlight class="stringliteral">&apos;office&apos;</highlight><highlight class="normal">)-&gt;getTarget());</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>function<sp/>doExecLogout()</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>User::getInstance(</highlight><highlight class="stringliteral">&apos;office&apos;</highlight><highlight class="normal">)-&gt;logout();</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>$this-&gt;redirect(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/raynald/Documents/Taf/Eclipse/m4php5/Office/UserModule.php"/>
  </compounddef>
</doxygen>
